import n,{useState as t,useRef as e,useEffect as r}from"react";import{useDrag as o}from"react-use-gesture";import i from"styled-components";var a=function(){return a=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},a.apply(this,arguments)};function c(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}"function"==typeof SuppressedError&&SuppressedError;var s,l,u,f,m,p,d=i.div(s||(s=c(["\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n"],["\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n"]))),v=i.div(l||(l=c(["\n  display: flex;\n  transition: transform 0.3s ease-in-out;\n"],["\n  display: flex;\n  transition: transform 0.3s ease-in-out;\n"]))),h=i.div(u||(u=c(["\n  flex: 0 0 ","%;\n"],["\n  flex: 0 0 ","%;\n"])),(function(n){return 100/n.visibleItems})),b=i.button(f||(f=c(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 24px;\n  border: none;\n  cursor: pointer;\n  z-index: 1;\n"],["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 24px;\n  border: none;\n  cursor: pointer;\n  z-index: 1;\n"]))),y=i(b)(m||(m=c(["\n  left: 10px;\n"],["\n  left: 10px;\n"]))),x=i(b)(p||(p=c(["\n  right: 10px;\n"],["\n  right: 10px;\n"]))),g=function(i){var c=i.isInfinite,s=i.children,l=i.visibleItems,u=void 0===l?3:l,f=t(c?s.length:0),m=f[0],p=f[1],b=t(!1),g=b[0],w=b[1],E=t(!1),k=E[0],I=E[1],M=e(null),O=t(0),T=O[0],j=O[1],z=s.length,P=1e3,W=Math.floor(z/2);r((function(){var n;j((null===(n=M.current)||void 0===n?void 0:n.offsetWidth)||0)}),[]),r((function(){if(g){if(0===m){var n=setTimeout((function(){w(!1),p(z)}),P);return function(){return clearTimeout(n)}}if(m===2*z){var t=setTimeout((function(){w(!1),p(z)}),P);return function(){return clearTimeout(t)}}}else p(c?m%z+z:m%z)}),[m,g,z,P]);var C=o((function(n){var t=n.down,e=n.movement[0],r=n.velocity,o=n.direction[0];if(t){var i=T/u*-m+e;M.current&&(M.current.style.transition="none",M.current.style.transform="translateX(".concat(i,"px)"))}else{var a=Math.min(W,Math.round(Math.abs(e/(T/u))*r)),s=m-Math.round(e/(T/u))-a*(o>0?1:-1);c||(s<0?s=0:s>=z-u+1&&(s=z-u)),p(s),w(!0)}I(t)})),S=-m*(T/u);return r((function(){!k&&M.current&&(M.current.style.transition=g?"".concat(P,"ms"):"none",M.current.style.transform="translateX(".concat(S,"px)"))}),[k,S,g,P]),n.createElement(d,null,n.createElement(y,{onClick:function(){g||(c||m>0)&&(w(!0),p((function(n){return n-1})))}},"Prev"),n.createElement(v,a({visibleItems:u,ref:M,onTransitionEnd:function(){w(!1),(0===m||m===2*z)&&p(z)}},C()),c&&s.map((function(t,e){return n.createElement(h,{visibleItems:u,key:"clone-prev-".concat(e),style:{minWidth:"".concat(100/u,"%")}},t)})),s.map((function(t,e){return n.createElement(h,{visibleItems:u,key:e,style:{minWidth:"".concat(100/u,"%")}},t)})),c&&s.map((function(t,e){return n.createElement(h,{visibleItems:u,key:"clone-next-".concat(e),style:{minWidth:"".concat(100/u,"%")}},t)}))),n.createElement(x,{onClick:function(){(c||m<z-u)&&(w(!0),p((function(n){return n+1})))}},"Next"))};export{g as Carousel};
//# sourceMappingURL=index.esm.js.map
